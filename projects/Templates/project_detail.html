{% extends "dashboard/Templates/base.html" %}
{% load i18n %}

{% block page_content %}

<style>
    .programming-lang {
        color: #27639d;
        font-weight: bold;
        margin-right: 5px;
    }
    .task-application {
        margin-top: 10px;
        padding: 10px;
        background-color: #f8f9fa;
        border-radius: 5px;
    }
</style>

<div class="container mt-4">
    <!-- Título do Projeto Estilizado -->
    <div class="row">
        <div class="col-12">
            <h1>
                {% trans "Projeto:" %}
                <span style="color: #27639d; font-weight: bold; font-size: 1.5em;">{{ project.title }}</span>
            </h1>
        </div>
    </div>
    
    <!-- Colunas para Dados do Projeto e Tasks -->
    <div class="row">
        <!-- Coluna com os Dados do Projeto -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <p><strong>{% trans "Category:" %}</strong> {{ project.category }}</p>
                    <p><strong>{% trans "Description:" %}</strong> {{ project.description }}</p>
                    <p><strong>{% trans "Created by:" %}</strong> {{ project.created_by }}</p>
                    <p><strong>{% trans "Date Created:" %}</strong> {{ project.date_created|date:"Y-m-d" }}</p>
                    <p><strong>{% trans "Last Updated:" %}</strong> {{ project.date_updated|date:"Y-m-d" }}</p>
                </div>
            </div>
        </div>

        <!-- Coluna com as Tasks -->
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h2>{% trans "Tasks" %}</h2>
                    <div class="list-group">
                        {% for task in tasks %}
                        <div class="list-group-item">
                            <h4>{{ task.title }}</h4>
                            <p>{{ task.description }}</p>
                            <p><strong>{% trans "Status:" %}</strong> {{ task.status }}</p>
                            <p><strong>{% trans "Due Date:" %}</strong> {{ task.due_date|date:"Y-m-d" }}</p>
                            <p><strong>{% trans "Initial Value:" %}</strong> {{ task.initial_value }}</p>
                            <!-- Lista de Linguagens de Programação -->
                            <p><strong>{% trans "Programming Languages:" %}</strong>
                                {% for language in task.programming_languages.all %}
                                    <span class="programming-lang">{{ language.name }}</span>
                                {% endfor %}
                            </p>
                            
                            {% if is_project_owner %}
                            <!-- Aplicações para esta task (apenas visível para o criador do projeto) -->
                            <div class="task-application">
                                <h5>{% trans "Applications" %}</h5>
                                {% for application in task.taskapplication_set.all %}
                                    <p>
                                        <strong>{% trans "Developer:" %}</strong> {{ application.developer }}<br>
                                        <strong>{% trans "Proposed Value:" %}</strong> {{ application.proposed_value }}<br>
                                        <strong>{% trans "Status:" %}</strong> {{ application.get_status_display }}
                                    </p>
                                    {% if not forloop.last %}<hr>{% endif %}
                                {% empty %}
                                    <p>{% trans "No applications yet." %}</p>
                                {% endfor %}
                            </div>
                            {% endif %}
                        </div>
                        {% empty %}
                        <p>{% trans "No tasks available." %}</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}